"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Polymer=window.Polymer,CustomEvent=window.CustomEvent,twitterTimeline=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"beforeRegister",value:function(){this.is="twitter-timeline",this.properties={Twtt:{type:Function},uniqueId:{type:String,value:"twitterTimelinePolymerLibLoader"},dataWidgetId:{type:String,observer:"_dataWidgetIdChanged"},size:{type:Object,value:function(){return{width:"400",height:"400"}}},_resolveTwttLoaded:{type:Function},_twttLoaded:{type:Promise,value:function(){var e=this;return new Promise(function(t){e._resolveTwttLoaded=t})}},_timelineLoaded:{type:Promise,value:function(){return Promise.resolve()}}}}},{key:"ready",value:function(){this._computeLibLink(),this._computeUniqueId(),this.$.loaderTwtt.isAttached&&this.$.loaderTwtt.attached()}},{key:"loadTimeline",value:function(e){var t=this;this._timelineLoaded=this._timelineLoaded.then(function(){t.removeTimeline()});var i=e||this._checkForWidgetId();return i?(this._timelineLoaded=this._timelineLoaded.then(function(){return t.Twtt.widgets.createTimeline(i,t.$.timeline,{width:t.size.width,height:t.size.height,related:"twitterdev,twitterapi"}).then(function(e){t.dispatchEvent(new CustomEvent("timeline-loaded",{detail:{loaded:!0}}))})}),!0):(console.warn("WARNING: 'data-widget-id' is not defined "),!1)}},{key:"removeTimeline",value:function(){return!!this.$.timeline.querySelector("iframe")&&this.$.timeline.removeChild(this.$.timeline.querySelector("iframe"))}},{key:"_computeLibLink",value:function(){this.$.loaderTwtt.set("lib","https://platform.twitter.com/widgets.js")}},{key:"_computeUniqueId",value:function(){this.$.loaderTwtt.set("libUniqueId",this.uniqueId)}},{key:"_checkForWidgetId",value:function(){return this.dataWidgetId||!1}},{key:"_onTwttLoad",value:function(){this.Twtt=window.twttr,this._resolveTwttLoaded()}},{key:"_dataWidgetIdChanged",value:function(){var e=this;this.dataWidgetId&&this._twttLoaded.then(function(){e.loadTimeline(e.dataWidgetId)})}},{key:"behaviors",get:function(){return[]}}]),e}();Polymer(twitterTimeline);